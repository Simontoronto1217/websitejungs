<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHRONEXT // EVENT HORIZON</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        // --- HIER IHRE DATEN EINFÜGEN ---
        const CLOUD_CONFIG = {
            BIN_ID: '', // Ihre Bin ID
            API_KEY: '' // Ihr Master Key
        };

        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'void': '#030304',
                        'accent-gold': '#D4AF37',
                        'accent-alert': '#FF3333',
                        'accent-holo': 'rgba(212, 175, 55, 0.1)',
                    },
                    fontFamily: {
                        'serif': ['Cinzel', 'serif'],
                        'sans': ['Inter', 'sans-serif'],
                        'mono': ['Space Mono', 'monospace'],
                    },
                    animation: {
                        'scanline': 'scanline 8s linear infinite',
                        'glitch': 'glitch 1s linear infinite',
                    },
                    keyframes: {
                        scanline: {
                            '0%': { transform: 'translateY(-100%)' },
                            '100%': { transform: 'translateY(100%)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { margin: 0; overflow: hidden; background-color: #030304; color: #E5E4E2; }
        
        /* CRT / HOLOGRAPHIC EFFECTS */
        .scanlines {
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            position: fixed; pointer-events: none; inset: 0; z-index: 50; opacity: 0.15;
        }
        .vignette {
            position: fixed; inset: 0; z-index: 40; pointer-events: none;
            background: radial-gradient(circle, transparent 60%, black 100%);
        }
        
        /* UI GLASS */
        .glass-hud {
            background: rgba(10, 10, 12, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(212, 175, 55, 0.15);
            box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 20px rgba(0,0,0,0.5);
            position: relative;
        }
        
        /* DECORATIVE CORNERS */
        .corner-bracket {
            position: absolute; width: 20px; height: 20px; border-color: #D4AF37; opacity: 0.5; transition: all 0.5s;
        }
        .glass-hud:hover .corner-bracket { opacity: 1; width: 30px; height: 30px; box-shadow: 0 0 10px #D4AF37; }
        .c-tl { top: -1px; left: -1px; border-top: 2px solid; border-left: 2px solid; }
        .c-tr { top: -1px; right: -1px; border-top: 2px solid; border-right: 2px solid; }
        .c-bl { bottom: -1px; left: -1px; border-bottom: 2px solid; border-left: 2px solid; }
        .c-br { bottom: -1px; right: -1px; border-bottom: 2px solid; border-right: 2px solid; }

        /* SCROLLBAR */
        .scroller::-webkit-scrollbar { width: 2px; }
        .scroller::-webkit-scrollbar-thumb { background: #D4AF37; }
        .scroller::-webkit-scrollbar-track { background: transparent; }

        /* TEXT INPUTS */
        textarea, input { 
            background: rgba(0,0,0,0.6); color: #D4AF37; border: 1px solid rgba(255,255,255,0.1); 
            font-family: 'Space Mono', monospace;
        }
        textarea:focus, input:focus { outline: none; border-color: #D4AF37; box-shadow: 0 0 15px rgba(212,175,55,0.2); }
    </style>
</head>

<body x-data="sisyphus()">

    <div id="canvas-container" class="fixed inset-0 z-0"></div>
    <div class="scanlines"></div>
    <div class="vignette"></div>

    <main class="relative z-10 w-full h-screen flex flex-col p-6 lg:p-10 transition-all duration-1000"
          :class="tickets.length === 0 ? 'saturate-150 brightness-110' : ''">
        
        <header class="flex justify-between items-end mb-6 select-none">
            <div class="relative pl-4 border-l-2 border-accent-gold/50">
                <div class="flex items-center gap-3 mb-1">
                    <div class="w-2 h-2 rounded-full animate-pulse" 
                         :class="connectionStatus === 'LIVE' ? 'bg-green-500 shadow-[0_0_10px_#0f0]' : 'bg-red-500'"></div>
                    <p class="font-mono text-[10px] tracking-[0.3em] text-gray-500 uppercase">
                        System Status: <span x-text="connectionStatus"></span>
                    </p>
                </div>
                <h1 class="font-serif text-4xl text-white tracking-widest drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]">
                    CHRONEXT <span class="text-accent-gold text-lg align-top">.OPS</span>
                </h1>
            </div>

            <div class="flex items-center gap-4">
                <div class="text-right mr-4" x-show="tickets.length > 0">
                    <div class="text-[9px] font-mono text-gray-500 tracking-widest uppercase">Gravity Load</div>
                    <div class="text-xl font-serif text-accent-gold" x-text="tickets.length + ' KG'"></div>
                </div>

                <button @click="openModal()" class="group relative px-6 py-3 bg-black/40 border border-white/10 hover:border-accent-gold transition-all overflow-hidden">
                    <div class="absolute inset-0 bg-accent-gold/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                    <span class="relative font-mono text-xs tracking-widest text-accent-gold group-hover:text-white">+ INJECT INTEL</span>
                </button>
                
                <button @click="syncData()" class="px-4 py-3 border border-white/10 bg-black/40 hover:bg-white/5 transition-colors">
                    <svg class="w-4 h-4 text-gray-400" :class="{'animate-spin text-accent-gold': isLoading}" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                </button>
            </div>
        </header>

        <div class="flex-1 glass-hud flex flex-col overflow-hidden relative group-hud">
            <div class="corner-bracket c-tl"></div>
            <div class="corner-bracket c-tr"></div>
            <div class="corner-bracket c-bl"></div>
            <div class="corner-bracket c-br"></div>

            <div class="grid grid-cols-12 gap-2 p-4 bg-black/60 font-mono text-[9px] tracking-[0.2em] text-gray-500 uppercase border-b border-white/5 backdrop-blur-md sticky top-0 z-20">
                <div class="col-span-1 text-center">Grav</div>
                <div class="col-span-2">Entity ID</div>
                <div class="col-span-5">Data Stream</div>
                <div class="col-span-2">Protocol</div>
                <div class="col-span-2 text-right">Uplink</div>
            </div>

            <div class="scroller overflow-y-auto flex-1 p-2 space-y-2" id="ticket-container">
                <template x-for="ticket in sortedTickets" :key="ticket.id">
                    <div :id="'ticket-'+ticket.id" class="grid grid-cols-12 gap-4 p-4 items-center border border-white/5 bg-black/20 hover:bg-white/5 hover:border-accent-gold/30 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)] transition-all duration-300 group relative">
                        
                        <div class="col-span-1 flex justify-center">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center font-serif font-bold border relative overflow-hidden"
                                 :class="{
                                     'border-accent-alert text-accent-alert shadow-[0_0_15px_#ff3333]': ticket.severity >= 9,
                                     'border-orange-500 text-orange-500': ticket.severity >= 7 && ticket.severity < 9,
                                     'border-accent-gold text-accent-gold': ticket.severity < 7
                                 }">
                                <div class="absolute inset-0 opacity-20 animate-pulse" :class="ticket.severity >=9 ? 'bg-accent-alert' : 'bg-transparent'"></div>
                                <span class="relative z-10" x-text="ticket.severity"></span>
                            </div>
                        </div>

                        <div class="col-span-2 truncate">
                            <div class="font-sans font-bold text-gray-200 tracking-wide text-sm group-hover:text-white" x-text="ticket.client"></div>
                            <div class="font-mono text-[9px] text-accent-gold/60" x-text="ticket.ref_id || 'UNKNOWN ID'"></div>
                        </div>

                        <div class="col-span-5 pr-2">
                            <p class="font-sans text-xs text-gray-400 leading-relaxed line-clamp-2 group-hover:line-clamp-none group-hover:text-gray-300 transition-all" x-text="ticket.context"></p>
                            
                            <div class="flex gap-2 mt-2">
                                <template x-if="ticket.wait_time_alert">
                                    <span class="px-2 py-0.5 bg-orange-900/40 text-orange-400 border border-orange-500/30 text-[9px] font-mono uppercase tracking-wider animate-pulse" x-text="ticket.wait_time_alert"></span>
                                </template>
                                <template x-if="ticket.meta_copy">
                                    <button @click="copy(ticket.meta_copy)" class="px-2 py-0.5 bg-white/5 hover:bg-accent-gold hover:text-black border border-white/10 text-[9px] font-mono text-gray-400 transition-colors uppercase flex items-center gap-2">
                                        COPY DATA <span class="opacity-50">⎘</span>
                                    </button>
                                </template>
                            </div>
                        </div>

                        <div class="col-span-2">
                            <div class="inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 rounded-sm">
                                <div class="w-1.5 h-1.5 rounded-full" :class="ticket.severity > 8 ? 'bg-red-500 animate-ping' : 'bg-green-500'"></div>
                                <span class="text-[9px] uppercase tracking-widest text-gray-300" x-text="ticket.action"></span>
                            </div>
                        </div>

                        <div class="col-span-2 flex justify-end items-center gap-3">
                            <template x-if="ticket.link">
                                <a :href="ticket.link" target="_blank" class="w-8 h-8 flex items-center justify-center border border-white/20 hover:border-accent-gold hover:bg-accent-gold hover:text-black transition-all rounded-sm group-btn">
                                    <svg class="w-3 h-3 transform group-btn-hover:rotate-45 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                                </a>
                            </template>
                            <button @click="archive(ticket.id)" class="w-8 h-8 flex items-center justify-center border border-white/10 hover:border-red-500 hover:bg-red-500/20 text-gray-500 hover:text-red-500 transition-all rounded-sm">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            </button>
                        </div>
                    </div>
                </template>
                
                <div x-show="tickets.length === 0" class="h-64 flex flex-col items-center justify-center text-accent-gold/50 space-y-4">
                    <div class="text-4xl animate-bounce opacity-50">❖</div>
                    <p class="font-serif tracking-[0.5em] text-sm">SINGULARITY ACHIEVED</p>
                    <p class="font-mono text-[9px] text-gray-600">WAITING FOR NEW ENTROPY...</p>
                </div>
            </div>
        </div>

        <div class="mt-4 flex justify-between text-[9px] font-mono text-gray-600 uppercase tracking-widest">
            <span>SISYPHUS PROTOCOL v5.0</span>
            <span x-text="'ORBITAL TIME: ' + new Date().toLocaleTimeString()"></span>
        </div>

        <div x-show="showModal" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100"
             class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl p-8">
            
            <div class="w-full max-w-6xl h-[85vh] border border-accent-gold/20 flex shadow-[0_0_100px_rgba(0,0,0,1)] relative bg-[#050505]">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-accent-gold to-transparent opacity-50"></div>

                <div class="w-1/2 p-8 border-r border-white/10 flex flex-col">
                    <h2 class="font-serif text-2xl text-accent-gold mb-2 tracking-widest">RAW DATA INJECTION</h2>
                    <p class="font-mono text-[10px] text-gray-500 mb-6">PASTE UNSTRUCTURED EMAIL/SLACK DUMPS. AI WILL PARSE SEVERITY & TIME-DELAYS.</p>
                    
                    <textarea x-model="rawData" class="flex-1 p-4 text-xs leading-relaxed resize-none mb-4 focus:shadow-[0_0_30px_rgba(212,175,55,0.1)] transition-shadow" placeholder="Paste communication stream here..."></textarea>
                    
                    <div class="flex gap-4">
                        <button @click="showModal = false" class="px-6 py-3 font-mono text-xs border border-white/10 text-gray-500 hover:text-white transition-colors">ABORT</button>
                        <button @click="processInput()" class="flex-1 px-6 py-3 bg-accent-gold/10 border border-accent-gold text-accent-gold font-bold font-mono text-xs tracking-widest hover:bg-accent-gold hover:text-black transition-all">
                            <span x-show="!isProcessing">INITIALIZE PARSING SEQUENCE</span>
                            <span x-show="isProcessing" class="animate-pulse">DECODING...</span>
                        </button>
                    </div>
                </div>

                <div class="w-1/2 p-8 flex flex-col bg-[#08080a]">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="font-serif text-xl text-gray-400 tracking-widest">DECODED OBJECTS</h2>
                        <span class="font-mono text-accent-gold text-xs border border-accent-gold/30 px-2 py-1" x-text="detectedCases.length + ' FOUND'"></span>
                    </div>

                    <div class="flex-1 overflow-y-auto space-y-3 pr-2 scroller">
                        <template x-for="(c, index) in detectedCases" :key="index">
                            <div class="p-4 border border-white/10 bg-white/5 hover:border-accent-gold/50 transition-colors relative group">
                                <div class="flex justify-between mb-2">
                                    <span class="font-serif font-bold text-lg" :class="c.severity >= 9 ? 'text-red-500' : 'text-accent-gold'" x-text="c.severity"></span>
                                    <span class="font-mono text-[9px] text-gray-500 uppercase" x-text="c.action"></span>
                                </div>
                                <input x-model="c.client" class="w-full bg-transparent border-b border-white/10 mb-2 font-sans font-bold text-sm focus:border-accent-gold">
                                <textarea x-model="c.context" rows="2" class="w-full bg-transparent border-none text-[10px] text-gray-400 resize-none p-0 focus:ring-0"></textarea>
                                
                                <div x-show="c.wait_time_alert" class="mt-2 flex items-center gap-2 text-[9px] text-orange-500 font-mono border border-orange-500/20 px-2 py-1 inline-block">
                                    <span class="w-1 h-1 bg-orange-500 rounded-full animate-ping"></span>
                                    <span x-text="c.wait_time_alert"></span>
                                </div>

                                <button @click="detectedCases.splice(index, 1)" class="absolute top-2 right-2 text-gray-600 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">✕</button>
                            </div>
                        </template>
                        
                        <div x-show="detectedCases.length === 0" class="h-full flex items-center justify-center text-gray-700 font-mono text-[10px]">
                            AWAITING INPUT DATA...
                        </div>
                    </div>

                    <button x-show="detectedCases.length > 0" @click="confirmImport()" class="mt-4 w-full py-4 bg-accent-gold text-black font-serif font-bold tracking-[0.2em] hover:bg-white transition-colors shadow-[0_0_20px_rgba(212,175,55,0.4)]">
                        COMMIT TO DATABASE
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        function sisyphus() {
            return {
                tickets: [],
                detectedCases: [],
                rawData: '',
                showModal: false,
                isLoading: false,
                isProcessing: false,
                connectionStatus: 'OFFLINE',
                sphereMesh: null, // For 3D manipulation

                async init() {
                    // JSONBin Connection
                    if(CLOUD_CONFIG.BIN_ID && CLOUD_CONFIG.API_KEY) {
                        this.connectionStatus = 'LIVE';
                        await this.loadFromCloud();
                    } else {
                        // Local Fallback
                        const local = localStorage.getItem('chronext_sisyphus_v5');
                        if(local) this.tickets = JSON.parse(local);
                    }
                    this.initGravityEngine();
                },

                // --- 1. THE ANALYTIC ENGINE (Regex + Time Logic) ---
                processInput() {
                    this.isProcessing = true;
                    this.detectedCases = [];
                    setTimeout(() => { // Sim delay for effect
                        this.parseLogic(this.rawData);
                        this.isProcessing = false;
                    }, 600);
                },

                parseLogic(text) {
                    // Split Logic: Double newlines or "https" followed by Client patterns
                    let chunks = text.replace(/\n\s*\n/g, '||SPLIT||').split('||SPLIT||');
                    if(chunks.length < 2 && text.length > 150) {
                        // Fallback splitter for messy copy-pastes
                         chunks = text.split(/(?=https:\/\/|Bitte|SR\d)/g); 
                    }

                    chunks.forEach(chunk => {
                        if(chunk.length < 15) return;
                        
                        // Temporal Analysis
                        let severity = 5;
                        let action = "REVIEW";
                        let waitAlert = null;
                        
                        const monthMap = { 'jan':0, 'feb':1, 'mär':2, 'mar':2, 'apr':3, 'mai':4, 'may':4, 'jun':5, 'jul':6, 'aug':7, 'sep':8, 'okt':9, 'oct':9, 'nov':10, 'dez':11, 'dec':11 };
                        const monthMatch = chunk.match(/(?:seit|vom|ab|in)\s+(Jan(?:uar)?|Feb(?:ruar)?|Mär(?:z)?|Apr(?:il)?|Mai|Jun(?:i)?|Jul(?:i)?|Aug(?:ust)?|Sep(?:tember)?|Okt(?:ober)?|Nov(?:ember)?|Dez(?:ember)?)/i);
                        
                        if (monthMatch) {
                            const mIndex = monthMap[monthMatch[1].toLowerCase().substring(0,3)];
                            let diff = new Date().getMonth() - mIndex;
                            if(diff < 0) diff += 12;
                            if(diff >= 2) { 
                                severity += 3; 
                                waitAlert = `WAITING ${diff} MONTHS`; 
                                action = "DE-ESCALATE";
                            }
                        }

                        // Keywords
                        if(chunk.match(/anwalt|lawyer|polizei|betrug|deadline/i)) { severity = 10; action = "LEGAL THREAT"; }
                        else if(chunk.match(/iban|auszahlung|geld/i)) { severity += 1; action = "FINANCE"; }
                        else if(chunk.match(/dhl|retoure|ups/i)) { severity += 1; action = "LOGISTICS"; }
                        else if(chunk.match(/anrufen|rückruf/i)) { if(action==="REVIEW") action="CALLBACK"; }

                        // Extraction
                        const link = (chunk.match(/https?:\/\/[^\s]+/) || [''])[0];
                        const ref_id = (chunk.match(/(SR\d+|PO\d+|#\d{4,})/i) || [''])[0].toUpperCase();
                        const client = (chunk.match(/(?:Herr|Frau|Mr|Mrs)\.?\s+([A-ZÄÖÜ][a-zäöü]+(?:\s[A-ZÄÖÜ][a-zäöü]+)?)/) || [null, (ref_id || 'Unknown Entity')])[1];
                        const meta = (chunk.match(/(\+49[\d\s]+|DE\d{20,})/) || [''])[0].replace(/\s/g,'');

                        this.detectedCases.push({
                            id: Date.now() + Math.random(),
                            client, ref_id, link, meta_copy: meta,
                            severity: Math.min(severity, 10),
                            action, wait_time_alert: waitAlert,
                            context: chunk.replace(link,'').substring(0,140).trim() + "..."
                        });
                    });
                },

                // --- 2. DATA OPS (With Implosion Animation) ---
                async confirmImport() {
                    this.tickets.unshift(...this.detectedCases);
                    this.detectedCases = [];
                    this.showModal = false;
                    this.rawData = '';
                    await this.saveToCloud();
                    this.updateGravity();
                },

                archive(id) {
                    const el = document.getElementById('ticket-'+id);
                    // GSAP Implosion
                    gsap.to(el, {
                        scale: 0.1, opacity: 0, duration: 0.4, ease: "back.in(1.7)",
                        onComplete: async () => {
                            this.tickets = this.tickets.filter(t => t.id !== id);
                            await this.saveToCloud();
                            this.updateGravity();
                            // Check for Ascension (Zero Inbox)
                            if(this.tickets.length === 0) this.triggerAscension();
                        }
                    });
                },

                async loadFromCloud() {
                    this.isLoading = true;
                    try {
                        const res = await fetch(`https://api.jsonbin.io/v3/b/${CLOUD_CONFIG.BIN_ID}/latest`, {
                            headers: { 'X-Master-Key': CLOUD_CONFIG.API_KEY }
                        });
                        const data = await res.json();
                        this.tickets = Array.isArray(data.record) ? data.record : []; 
                    } catch(e) { console.error("Sync Error", e); }
                    this.isLoading = false;
                    this.updateGravity();
                },

                async saveToCloud() {
                    if(this.connectionStatus === 'OFFLINE') {
                        localStorage.setItem('chronext_sisyphus_v5', JSON.stringify(this.tickets));
                        return;
                    }
                    this.isLoading = true;
                    await fetch(`https://api.jsonbin.io/v3/b/${CLOUD_CONFIG.BIN_ID}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json', 'X-Master-Key': CLOUD_CONFIG.API_KEY },
                        body: JSON.stringify(this.tickets)
                    });
                    this.isLoading = false;
                },

                copy(t) { navigator.clipboard.writeText(t); },
                get sortedTickets() { return this.tickets.sort((a,b) => b.severity - a.severity); },
                openModal() { this.showModal = true; this.rawData = ''; this.detectedCases = []; },

                // --- 3. GRAVITY ENGINE (Three.js) ---
                initGravityEngine() {
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
                    const renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    document.getElementById('canvas-container').appendChild(renderer.domElement);
                    camera.position.z = 30;

                    // The Core (Wireframe Sphere)
                    const geo = new THREE.IcosahedronGeometry(10, 2);
                    const mat = new THREE.MeshBasicMaterial({color: 0x333333, wireframe: true, transparent:true, opacity:0.1});
                    this.sphereMesh = new THREE.Mesh(geo, mat);
                    scene.add(this.sphereMesh);

                    // Particle Field (Stars/Dust)
                    const pGeo = new THREE.BufferGeometry();
                    const pCount = 1500;
                    const pPos = new Float32Array(pCount*3);
                    for(let i=0; i<pCount*3; i++) pPos[i] = (Math.random()-0.5)*100;
                    pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
                    const pMat = new THREE.PointsMaterial({size: 0.1, color: 0x555555});
                    const particles = new THREE.Points(pGeo, pMat);
                    scene.add(particles);

                    // Animation Loop
                    const animate = () => {
                        requestAnimationFrame(animate);
                        
                        // Default Rotation
                        if(this.sphereMesh) {
                            this.sphereMesh.rotation.y += 0.002;
                            this.sphereMesh.rotation.x += 0.001;
                        }
                        particles.rotation.y -= 0.0005;

                        // Mouse Parallax (subtle)
                        renderer.render(scene, camera);
                    };
                    animate();
                    this.renderer = renderer;
                    this.scene = scene;
                },

                updateGravity() {
                    // Visual changes based on ticket count
                    const count = this.tickets.length;
                    if(!this.sphereMesh) return;

                    if(count === 0) {
                        // ASCENSION MODE
                        gsap.to(this.sphereMesh.material, { color: 0xD4AF37, opacity: 0.3, duration: 2 });
                        gsap.to(this.sphereMesh.scale, { x: 1.5, y: 1.5, z: 1.5, duration: 3 });
                    } else if (count > 10) {
                        // STRESS MODE
                        gsap.to(this.sphereMesh.material, { color: 0xFF3333, opacity: 0.2, duration: 1 });
                        gsap.to(this.sphereMesh.scale, { x: 0.8, y: 0.8, z: 0.8, duration: 0.5 });
                    } else {
                        // NORMAL MODE
                        gsap.to(this.sphereMesh.material, { color: 0x333333, opacity: 0.1, duration: 1 });
                        gsap.to(this.sphereMesh.scale, { x: 1, y: 1, z: 1, duration: 1 });
                    }
                },
                
                triggerAscension() {
                    // Special effect for Zero Inbox
                    // Can add confetti here if desired via another library, 
                    // currently handled by the Gold Shift in updateGravity
                }
            }
        }
    </script>
</body>
</html>
